<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Edit Availability</title>
<link rel="stylesheet" href="styles.css">
<style>
/* ---------- Page-specific ---------- */
main {
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 24px;
}

h2 {
  font-size: 2rem;
  margin-bottom: 16px;
}

/* Wrapper for header + grid */
.edit-wrapper {
  display: flex;
  flex-direction: column;
  gap: 4px;
  overflow-x: auto;
}

/* Days header */
.days-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr); /* 7 day columns */
  gap: 2px;
  margin-bottom: 4px;
}

.days-header div {
  text-align: center;
  color: #b9b9cc;
  font-size: 0.9rem;
}

/* Time + grid wrapper */
.time-grid-wrapper {
  display: grid;
  grid-template-columns: auto 1fr; /* time labels + main grid */
  gap: 4px;
  align-items: start;
  overflow-x: auto;
}

/* Time labels */
.time-labels {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
}

.time-labels div {
  height: 22px;       /* each row height */
  line-height: 20px;
  font-size: 0.7rem;
  color: #b9b9cc;
  text-align: right;
  padding-right: 4px;
}

/* Edit grid */
.edit-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

/* Each cell stretches to fit the grid row height automatically */
.edit-cell {
  width: 100%;   /* stretch to fill column */
  height: 20px;
  background: #444454;
  border-radius: 2px;
  cursor: pointer;
  transition: background 0.2s;
}

.edit-cell.hover {
  background: #6aa6ff; /* selected color */
}
</style>
</head>
<body>

<header>
  <div class="header-title">
    <img src="icon.png" alt="Studio Icon">
    <h1>Echo Studio</h1>
  </div>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="members.html">Members</a>
  <a href="availability.html">Availability</a>
</nav>

<main>
  <h2>Edit Availability</h2>

  <div class="edit-wrapper">
    <!-- Days of the week header -->
    <div class="days-header" id="daysHeader"></div>

    <!-- Time labels + grid -->
    <div class="time-grid-wrapper">
      <div class="time-labels" id="timeLabels"></div>
      <div id="editGrid" class="edit-grid"></div>
    </div>
  </div>
</main>

<script>
const hours = 24;
const increments = 2; // half-hour increments
const days = 7;

const timeLabelsEl = document.getElementById("timeLabels");
const daysHeaderEl = document.getElementById("daysHeader");
const gridEl = document.getElementById("editGrid");
const cells = [];

// --- Days header ---
const dayNames = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
for (let d=0; d<days; d++) {
  const div = document.createElement("div");
  div.textContent = dayNames[d];
  daysHeaderEl.appendChild(div);
}

// --- Time labels ---
for (let h=0; h<hours; h++) {
  for (let i=0; i<increments; i++) {
    const date = new Date();
    date.setHours(h, i*30, 0, 0);
    const label = document.createElement("div");
    label.textContent = date.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    timeLabelsEl.appendChild(label);
  }
}

// --- Build 7x48 grid ---
for (let row=0; row<hours*increments; row++) {
  for (let day=0; day<days; day++) {
    const cell = document.createElement("div");
    cell.classList.add("edit-cell");
    cell.dataset.day = day;
    cell.dataset.row = row;
    gridEl.appendChild(cell);
    cells.push(cell);
  }
}

// --- Click + Drag Selection Logic ---
let isDragging = false;
let dragValue = true; // whether we're turning cells on or off

cells.forEach(cell => {
  // Mouse down: start drag
  cell.addEventListener("mousedown", (e) => {
    e.preventDefault(); // prevent text selection
    isDragging = true;
    dragValue = !cell.classList.contains("active"); // toggle value
    toggleCell(cell, dragValue);
  });

  // Mouse enter: apply drag if dragging
  cell.addEventListener("mouseenter", () => {
    if (isDragging) toggleCell(cell, dragValue);
  });

  // Optional: click also toggles on its own
  cell.addEventListener("click", () => {
    toggleCell(cell, !cell.classList.contains("active"));
  });
});

// Stop dragging on mouse up anywhere
document.addEventListener("mouseup", () => {
  isDragging = false;
});

// --- Toggle cell state ---
function toggleCell(cell, value) {
  if (value) {
    cell.classList.add("active");
  } else {
    cell.classList.remove("active");
  }
}
</script>

</body>
</html>
